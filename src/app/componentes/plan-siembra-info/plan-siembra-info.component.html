<div class="contenedor-principal animated fadeIn">


<h1 class="Titutlo_form animated fadeIn fast">Plan de siembras</h1>

<br/>

<ng4-loading-spinner> </ng4-loading-spinner>

<div *ngIf="estado == 0" class="alert alert-danger animated fadeIn fast" role="alert">
  Ha ocurrido un error, intenta mas tarde.
</div>

<form (ngSubmit)="consultar()" class="form-inline">

  <div class="form-group mb-4">
    <ng2-completer (selected)="onSelectedUnidad($event)" [datasource]="dataServiceUnidad" [inputClass]="['form-control']" [minSearchLength]="4"
        [textSearching]="'Buscando...'" [placeholder]="'Buscar unidad'" [pause]="500" [textNoResults]="'Sin resultados'" [clearUnselected]="true" required></ng2-completer>
  </div>
  <div class="form-group mb-4">
    <input [(ngModel)]="year" #cYear="ngModel" name="year" type="number" class="form-control" placeholder="Año" required>
  </div>
  <select [(ngModel)]="campania" #cCampania="ngModel" name="campania" class="form-control mb-4" required>
    <option value="">-- Seleccione la campaña --</option>
    <option value="A">A</option>
    <option value="B">B</option>
  </select>
  <button [disabled]="!cYear.valid || !cCampania.valid || idUnidad == 0" type="submit" class="btn btn-primary mb-2">Consultar</button>

</form>

<br/>

<div *ngIf="lstPlaneacionInfo.length == 0 && consultado" class="jumbotron">
  <p class="lead">No hay cultivos en la campaña seleccionada.</p>
</div>

<div *ngFor="let lstPlaneacion of lstPlaneacionInfo" class="row">

  <div *ngFor="let item of lstPlaneacion" class="row">

    <h3>{{item.cultivo}} - {{item.mes}}</h3>

    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th class="text-center" class="text-vertical-center text-center" rowspan="2">Mes</th>
          <th colspan="3" class="text-center">Area de siembra</th>
          <th class="text-center">Total</th>
        </tr>
        <tr>
          <th class="text-center">Decada 1</th>
          <th class="text-center">Decada 2</th>
          <th class="text-center">Decada 3</th>
          <th class="text-center">Has</th>
        </tr>
      </thead>
      <tbody>

        <tr>
          <th class="text-center">{{item.mes}}</th>
          <td class="text-center">{{item.periodo1}}</td>
          <td class="text-center">{{item.periodo2}}</td>
          <td class="text-center">{{item.periodo3}}</td>
          <td class="text-center">{{item.total}}</td>
        </tr>

      </tbody>
    </table>

    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th class="text-center" class="text-vertical-center text-center" rowspan="2">Mes</th>
          <th colspan="3" class="text-center">Volumen
          </th>
          <th class="text-center">Total</th>
        </tr>
        <tr>
          <th class="text-center">Decada 1</th>
          <th class="text-center">Decada 2</th>
          <th class="text-center">Decada 3</th>
          <th class="text-center">
            <span>
              <i>m</i>
              <sup>
                <i>3</i>
              </sup>
            </span>
          </th>
        </tr>
      </thead>
      <tbody>

        <tr *ngFor="let demanda of item.demanda">
          <th class="text-center">{{demanda.mes}}</th>
          <td class="text-center">{{demanda.decada[0] | number}}</td>
          <td class="text-center">{{demanda.decada[1] | number}}</td>
          <td class="text-center">{{demanda.decada[2] | number}}</td>
          <td class="text-center">{{demanda.decada[0] + demanda.decada[1] + demanda.decada[2] | number}}</td>
        </tr>

      </tbody>
    </table>

  </div>

</div>

</div>
